/**
 * Animated Track Toggle - Direct CSS Transplant
 *
 * Features:
 * - CSS variables for sizing and colors
 * - Complex keyframe animations for thumb and track
 * - Rotating track sections with 3D perspective
 * - Glowing light indicators with box-shadow
 * - Radial gradients for depth and lighting
 */

/* Main Toggle Container */
.toggle {
  --sz: 9vmin;
  --on: #00ff00;
  --of: #ff0000;
  --gr: #808080;

  position: relative;
  cursor: pointer;
}

/* Hidden Checkbox Input */
.toggle input[type="checkbox"] {
  display: none;
}

/* Label Container */
.toggle label {
  width: calc(var(--sz) * 6);
  height: calc(var(--sz) * 3);
  border-radius: calc(var(--sz) * 1.5);
  background: var(--gr);
  position: relative;
  display: flex;
  align-items: center;
  cursor: pointer;
  overflow: hidden;
  transition: background 0.3s ease;
}

/* Track Container */
.toggle .track {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  padding: calc(var(--sz) * 0.2) calc(var(--sz) * 0.5);
}

/* Track Top Section */
.toggle .track-top,
.toggle .track-bot {
  display: flex;
  justify-content: space-around;
  align-items: center;
  height: 40%;
  position: relative;
}

/* Track Segments (dots/indicators) */
.toggle .track-top span,
.toggle .track-bot span {
  width: calc(var(--sz) * 0.4);
  height: calc(var(--sz) * 0.4);
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.2));
  border-radius: 50%;
  transition: all 0.4s ease;
}

/* Thumb (sliding button) */
.toggle .thumb {
  width: calc(var(--sz) * 2.5);
  height: calc(var(--sz) * 2.5);
  background: radial-gradient(circle at 30% 30%, #ffffff, #c0c0c0);
  border-radius: 50%;
  position: absolute;
  left: calc(var(--sz) * 0.25);
  box-shadow: 0 calc(var(--sz) * 0.1) calc(var(--sz) * 0.3) rgba(0, 0, 0, 0.5);
  transition: all 0.4s ease;
  z-index: 2;
}

/* Lights Container */
.toggle .lights {
  position: absolute;
  top: calc(100% + var(--sz));
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: calc(var(--sz) * 2);
}

/* Individual Light Indicators */
.toggle .light-off,
.toggle .light-on {
  width: calc(var(--sz) * 1.5);
  height: calc(var(--sz) * 1.5);
  border-radius: 50%;
  position: relative;
  transition: all 0.4s ease;
}

/* OFF Light (default state) */
.toggle .light-off {
  background: radial-gradient(circle at center, var(--of), transparent);
  box-shadow: 0 0 calc(var(--sz) * 0.3) var(--of),
              inset 0 0 calc(var(--sz) * 0.2) rgba(0, 0, 0, 0.5);
}

/* ON Light (default state - dim) */
.toggle .light-on {
  background: radial-gradient(circle at center, rgba(0, 255, 0, 0.3), transparent);
  box-shadow: 0 0 calc(var(--sz) * 0.1) rgba(0, 255, 0, 0.2),
              inset 0 0 calc(var(--sz) * 0.2) rgba(0, 0, 0, 0.5);
}

/* Light Labels */
.toggle .light-off::before {
  content: "off";
  position: absolute;
  top: 120%;
  left: 50%;
  transform: translateX(-50%);
  color: var(--of);
  font-size: calc(var(--sz) * 0.5);
  font-weight: bold;
  text-transform: uppercase;
  font-family: monospace;
}

.toggle .light-on::before {
  content: "on";
  position: absolute;
  top: 120%;
  left: 50%;
  transform: translateX(-50%);
  color: var(--gr);
  font-size: calc(var(--sz) * 0.5);
  font-weight: bold;
  text-transform: uppercase;
  font-family: monospace;
  transition: color 0.4s ease;
}

/* CHECKED STATE - Animations and Transformations */

/* Thumb moves right */
.toggle input[type="checkbox"]:checked ~ label .thumb {
  left: calc(var(--sz) * 3.25);
  animation: move-thumb 0.4s forwards;
}

/* Track top rotates right */
.toggle input[type="checkbox"]:checked ~ label .track-top {
  animation: t-top-r 0.4s forwards;
}

/* Track bottom rotates left */
.toggle input[type="checkbox"]:checked ~ label .track-bot {
  animation: t-bot-l 0.4s forwards;
}

/* Label background turns green */
.toggle input[type="checkbox"]:checked ~ label {
  background: var(--on);
}

/* OFF light dims */
.toggle input[type="checkbox"]:checked ~ .lights .light-off {
  background: radial-gradient(circle at center, rgba(255, 0, 0, 0.3), transparent);
  box-shadow: 0 0 calc(var(--sz) * 0.1) rgba(255, 0, 0, 0.2),
              inset 0 0 calc(var(--sz) * 0.2) rgba(0, 0, 0, 0.5);
}

/* ON light glows bright */
.toggle input[type="checkbox"]:checked ~ .lights .light-on {
  background: radial-gradient(circle at center, var(--on), transparent);
  box-shadow: 0 0 calc(var(--sz) * 0.5) var(--on),
              0 0 calc(var(--sz) * 1) var(--on),
              inset 0 0 calc(var(--sz) * 0.2) rgba(0, 0, 0, 0.3);
}

.toggle input[type="checkbox"]:checked ~ .lights .light-on::before {
  color: var(--on);
}

/* UNCHECKED STATE - Reverse animations */

/* Thumb moves left */
.toggle input[type="checkbox"]:not(:checked) ~ label .thumb {
  animation: move-thumb-back 0.4s forwards;
}

/* Track top rotates left */
.toggle input[type="checkbox"]:not(:checked) ~ label .track-top {
  animation: t-top-l 0.4s forwards;
}

/* Track bottom rotates right */
.toggle input[type="checkbox"]:not(:checked) ~ label .track-bot {
  animation: t-bot-r 0.4s forwards;
}

/* KEYFRAME ANIMATIONS */

/* Thumb movement animations */
@keyframes move-thumb {
  0% {
    left: calc(var(--sz) * 0.25);
  }
  100% {
    left: calc(var(--sz) * 3.25);
  }
}

@keyframes move-thumb-back {
  0% {
    left: calc(var(--sz) * 3.25);
  }
  100% {
    left: calc(var(--sz) * 0.25);
  }
}

/* Track top animations */
@keyframes t-top-r {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(5deg);
  }
  100% {
    transform: rotateX(-5deg);
  }
}

@keyframes t-top-l {
  0% {
    transform: rotateX(-5deg);
  }
  50% {
    transform: rotateX(5deg);
  }
  100% {
    transform: rotateX(0deg);
  }
}

/* Track bottom animations */
@keyframes t-bot-r {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(-5deg);
  }
  100% {
    transform: rotateX(5deg);
  }
}

@keyframes t-bot-l {
  0% {
    transform: rotateX(5deg);
  }
  50% {
    transform: rotateX(-5deg);
  }
  100% {
    transform: rotateX(0deg);
  }
}
